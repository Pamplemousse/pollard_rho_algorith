EXE=pollard

CFLAGS=-std=c11 -Wall -Wextra -Wno-unused-result -g
CPPFLAGS=-Iinclude -DDEBUG
LDFLAGS=-lgmp

.PHONY: all clean test help


all: clean build

build:
	$(MAKE) $(EXE)

$(EXE): main.o iteration_function.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

%.o: %.c %.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

clean:
	@rm -f *.o $(EXE)

test:
	@cd test && $(MAKE)

help:
	@echo "Usage:"
	@echo -e "  make [all]\t\tClean then build"
	@echo -e "  make build\t\tBuild the executable"
	@echo -e "  make clean\t\tRemove all files generated by make"
	@echo -e "  make help\t\tDisplay this help"
