EXE=pollard

CFLAGS=-std=c11 -Wall -Wextra -Wno-unused-result -g
CPPFLAGS=-Iinclude -DDEBUG
LDFLAGS=-lgmp

.PHONY: all clean help


all: clean build

build:
	$(MAKE) $(EXE)

$(EXE): main.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

%.o: %.c main.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

clean:
	@rm -f *.o $(EXE)

help:
	@echo "Usage:"
	@echo -e "  make [all]\t\tClean then build"
	@echo -e "  make build\t\tBuild the executable"
	@echo -e "  make clean\t\tRemove all files generated by make"
	@echo -e "  make help\t\tDisplay this help"
